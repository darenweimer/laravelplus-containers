services:
    nginx:
        image: laravel/nginx
        build:
            context: nginx
            args:
                ALPINE_VERSION: 3.18
        volumes:
            - shared:/var/www:delegated
        ports:
            - 8080:80
        depends_on:
            - php
        restart: unless-stopped
    php:
        image: laravel/php
        build:
            context: php
            target: production
            args:
                ALPINE_VERSION: 3.18
                PHP_VERSION: 82
        volumes:
            - shared:/var/www:delegated
        restart: unless-stopped
    php-dev:
        image: laravel/php-dev
        build:
            context: php
            target: development
            args:
                ALPINE_VERSION: 3.18
                PHP_VERSION: 82
        volumes:
            - shared:/var/www:delegated
        restart: unless-stopped
    node:
        image: laravel/node
        build:
            context: node
            args:
                ALPINE_VERSION: 3.18
        volumes:
            - shared:/var/www:delegated
        restart: unless-stopped
volumes:
    shared:
